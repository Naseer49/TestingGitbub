<!DOCTYPE html>
<html lang="en">

<head>
  <title>Cricket Game</title>
  <link rel="stylesheet" href="cricket.css" />
</head>

<body>
  <h1>Bat Ball Stump Game</h1>

  <!-- Bat Button -->
  <button class="choise-button" onclick="
    let computerChoise = ComputerGenerateFunction();
    let userChoise = 'Bat';
    let resultMsg = getResult(userChoise, computerChoise);
    showResult(userChoise, resultMsg , computerChoise);
    

  ">
    <img src="images/bat.png" alt="Bat Image" class="choise-image" />
  </button>

  <!-- Ball Button -->
  <button class="choise-button" onclick=" 
     computerChoise = ComputerGenerateFunction();
     userChoise = 'Ball';
    resultMsg = getResult(userChoise , computerChoise);
    showResult(userChoise, resultMsg , computerChoise);
   

  ">
    <img src="images/ball.png" alt="Ball Image" class="choise-image" />
  </button>

  <!-- Stump Button -->
  <button class="choise-button" onclick="
   
   computerChoise = ComputerGenerateFunction();
    userChoise = 'Stump';
    resultMsg = getResult(userChoise, computerChoise);
    showResult(userChoise, resultMsg , computerChoise);

  ">
    <img src="images/stump.png" alt="Stump Image" class="choise-image" />
  </button>

  <h4 id="user-move"></h4>
  <h4 id="computer-move"></h4>
  <h4 id="result"></h4>
  <h4 id="scoreboard"></h4>
  <button id="reset-button" onclick="
     localStorage.clear();
      resetScore();
  ">
    Reset
  </button>
  <script>
    let scoreStr = localStorage.getItem("score");
    let score;
    resetScore(scoreStr);
    function resetScore(scoreStr) {
      score = scoreStr
        ? JSON.parse(scoreStr)
        : {
          win: 0,
          tie: 0,
          lost: 0,
        };
      score.displayScore = function () {
        return ` win: ${score.win} tie: ${score.tie} lost: ${score.lost}`;
      };
      showResult();
    }

    function ComputerGenerateFunction() {
      randomNumber = Math.random() * 3;

      if (randomNumber > 0 && randomNumber <= 1) {
        return "Bat";
      } else if (randomNumber > 1 && randomNumber <= 2) {
        return "Ball";
      } else {
        return "Stump";
      }
    }

    function getResult(userChoise, computerChoise) {
      if (userChoise === "Bat") {
        if (computerChoise === "Ball") {
          score.win++;
          return "User won!";
        } else if (computerChoise === "Bat") {
          score.tie++;
          return `It's a tie`;
        } else {
          score.lost++;
          return "Computer Won";
        }
      } else if (userChoise === "Ball") {
        if (computerChoise === "Stump") {
          score.win++;
          return "User won!";
        } else if (computerChoise === "Ball") {
          score.tie++;
          return `It's a tie`;
        } else {
          score.lost++;

          return "Computer Won";
        }
      } else if (userChoise === "Stump") {
        if (computerChoise === "Bat") {
          score.win++;
          return "User won!";
        } else if (computerChoise === "Stump") {
          score.tie++;
          return `It's a tie`;
        } else {
          score.lost++;
          return "Computer Won";
        }
      }
    }

    function showResult(userChoise, resultMsg, computerChoise) {
      localStorage.setItem("score", JSON.stringify(score));

      document.querySelector("#user-move").innerText = userChoise
        ? `You have chosen ${userChoise}`
        : "";
      document.querySelector("#computer-move").innerText = computerChoise
        ? `Computer choice is ${computerChoise}`
        : "";
      document.querySelector("#result").innerText = resultMsg || "";
      document.querySelector("#scoreboard").innerText = score.displayScore();
    }
  </script>
</body>

</html>